## **Directory Structure**
- **`app/` (Next.js App Router)**
  - Subfolders for each route, each containing `page.tsx` and optionally `layout.tsx`.
- **`components/ui/` (UI Primitives)**
  - Reusable React components (Buttons, Dialogs, Inputs).
  - Minimal logic; rely on Tailwind for styling.
  - We are using Tremor
- **`data/` (Seed Data & Demo Content)**
  - JSON, CSV, or seed scripts for database initialization.
- **`lib/` (Custom Hooks & Utilities)**
  - Utility functions (e.g., data fetching, mobile detection).
- **`prisma/` (Database Schema & Client)**
  - Contains `schema.prisma` and Prisma client initialization.
- **`public/` (Static Assets)**
  - Images, icons, and brand files.
- **`next.config.ts`**
  - Next.js configuration (e.g., experimental features, prerendering).

## **Data Modeling (Prisma)**
- Define models in `prisma/schema.prisma`.
- Run `npx prisma migrate dev` for database updates.
- Use `npx prisma generate` to generate the Prisma client.
- Fetch and update data using Prisma in server components.

## **Next.js 13+ App Router & React 19**
- **File-Based Routing**
  - Each `app/` subfolder with `page.tsx` defines a route.
- **Layouts**
  - Use `layout.tsx` to wrap child routes.
- **Server Components**
  - Default in `app/` directory; import data directly.
- **Client Components**
  - Add `"use client"` for client-side interactions.
- **Metadata**
  - Export a `metadata` object in pages and layouts for SEO.
- **Partial Prerendering**
  - Enable in `next.config.ts` to improve load performance.
- **Server Actions**
  - Use `"use server"` to handle form submissions in server components.

## **Tailwind CSS & Theming**
- **Setup**
  - Install Tailwind and configure `tailwind.config.ts`.
- **Dark Mode**
  - Use `darkMode: "class"` in Tailwind config.
  - Implement `ThemeProvider` from `next-themes`.
- **Utility Classes**
  - Use Tailwind for consistent styling (spacing, typography, colors).

## **UI Components & Patterns**
- **`components/ui/` Directory**
  - Small, composable UI blocks (Buttons, Inputs, Dialogs).
- **Minimal Logic**
  - Typed with TypeScript, styled with Tailwind.
- **Tremor UI**
  - Similar to shadcn, focusing on composability. We are NOT using shadcn.

## **Clerk Authentication & Middleware**
- **Usage**
  - Wrap app in `<ClerkProvider>`.
  - Use `<SignIn>`, `<UserButton>`, `<SignedIn>`.



## **Scheduling, Subscriptions & Strategies**
- **Scheduling**
  - Store cron expressions in the `Schedule` model.
  - Implement background jobs for execution.
- **Subscriptions**
  - Define `Subscription` model linking `User` and `Reporter`.
  - Trigger notifications on new stories.
- **Strategies**
  - Each `Reporter` has a strategy field (e.g., `"HN_BEST_STORIES"`).
  - Implement fetching logic accordingly.



## **Testing, Linting & Automation**
- **Vitest**
  - Install and create `.spec.ts` tests.
- **Playwright**
  - Install and create `.test.ts` tests.
- **Biome (Lint & Format)**
  - Use `biome check .` and `biome format .`.
- **GitHub Actions**
  - Automate CI with linting, tests, and builds.
- **Bun (Optional for Speed)**
  - Faster installs and test runs.



## **Implementation Tips**
- Keep **server logic** in server components or actions.
- Use **client components** only for interactive UI.
- Maintain consistent **TypeScript** types across codebase.
- Store secrets in **environment variables** (`.env`).
- Always create tests for new features.

## E2E Tests

Add e2e tests and Vitest spec tests at the end. e2e tests are located in the e2e folder, and the Vitest spec test should be colocated with .test.ts after the file name.

## Commit Messages

When everything is done, print what should be a commit message with:

:emoji_text: (scope) description

You should use the ASCII representation of the emoji, not the Unicode itself. For example, :sparkles: is correct, not âœ¨.

Available Emojis are:

| Emoji | Description |
|-------|-------------|
| ğŸ¨ | Improving structure / format of the code |
| âš¡ï¸ | Improving performance |
| ğŸ”¥ | Removing code or files |
| ğŸ› | Fixing a bug |
| ğŸš‘ | Critical hotfix |
| âœ¨ | Introducing new features |
| ğŸ“ | Writing docs |
| ğŸš€ | Deploying stuff |
| ğŸ’„ | Updating the UI and style files |
| ğŸ‰ | Initial commit |
| âœ… | Adding tests |
| ğŸ”’ | Fixing security issues |
| ğŸ | Fixing something on macOS |
| ğŸ§ | Fixing something on Linux |
| ğŸ | Fixing something on Windows |
| ğŸ¤– | Fixing something on Android |
| ğŸ | Fixing something on iOS |
| ğŸ”– | Releasing / Version tags |
| ğŸš¨ | Removing linter warnings |
| ğŸš§ | Work in progress |
| ğŸ’š | Fixing CI Build |
| â¬‡ï¸ | Downgrading dependencies |
| â¬†ï¸ | Upgrading dependencies |
| ğŸ“Œ | Pinning dependencies to specific versions |
| ğŸ‘· | Adding CI build system |
| ğŸ“ˆ | Adding analytics or tracking code |
| â™»ï¸ | Refactoring code |
| ğŸ³ | Work about Docker |
| â• | Adding a dependency |
| â– | Removing a dependency |
| ğŸ”§ | Changing configuration files |
| ğŸŒ | Internationalization and localization |
| âœï¸ | Fixing typos |
| ğŸ’© | Writing bad code that needs to be improved |
| âª | Reverting changes |
| ğŸ”€ | Merging branches |
| ğŸ“¦ | Updating compiled files or packages |
| ğŸ‘½ | Updating code due to external API changes |
| ğŸšš | Moving or renaming files |
| ğŸ“„ | Adding or updating license |
| ğŸ’¥ | Introducing breaking changes |
| ğŸ± | Adding or updating assets |
| ğŸ‘Œ | Updating code due to code review changes |
| â™¿ï¸ | Improving accessibility |
| ğŸ’¡ | Documenting source code |
| ğŸ» | Writing code drunkenly |
| ğŸ’¬ | Updating text and literals |
| ğŸ—ƒ | Performing database related changes |
| ğŸ”Š | Adding logs |
| ğŸ”‡ | Removing logs |
| ğŸ‘¥ | Adding contributor(s) |
| ğŸš¸ | Improving user experience / usability |
| ğŸ— | Making architectural changes |
| ğŸ“± | Working on responsive design |
| ğŸ¤¡ | Mocking things |
| ğŸ¥š | Adding an easter egg |
| ğŸ™ˆ | Adding or updating a .gitignore file |
| ğŸ“¸ | Adding or updating snapshots |
| âš— | Experimenting new things |
| ğŸ” | Improving SEO |
| â˜¸ï¸ | Work about Kubernetes |
| ğŸ·ï¸ | Adding or updating types (Flow, TypeScript) |
| ğŸŒ± | Adding or updating seed files |
| ğŸš© | Adding, updating, or removing feature flags |
| ğŸ’« | Adding or updating animations and transitions |
| ğŸ—‘ï¸ | Deprecate code that needs to be cleaned up |
| ğŸ›‚ | Work on code related to authorization, roles and permissions |
| ğŸ©¹ | Simple fix for a non-critical issue |
| ğŸ§ | Data exploration/inspection |
| âš°ï¸ | Remove dead code |
| ğŸ§ª | Add a failing test |
| ğŸ‘” | Add or update business logic |
| ğŸ©º | Add or update healthcheck |
| ğŸ§± | Infrastructure related changes |
| ğŸ§‘â€ğŸ’» | Improve developer experience |
